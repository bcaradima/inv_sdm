<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="summary">Summary</h1><p>The RStudio project “model_dev” contains the input data, scripts, model results, and processed results. Over time, “model_dev” has been used to perform the complete model development workflow for two distinct papers stemming from the Human Impacts project:</p><ul><li><p>Caradima, B., Schuwirth, N., &amp; Reichert, P. (2019). From individual to joint species distribution models: A comparison of model complexity and predictive performance. <em>Journal of Biogeography</em>, <em>46</em>(10), 2260-2274.</p></li><li><p>Caradima, B., Reichert, P., &amp; Schuwirth, N. (2020). Effects of site selection and taxonomic resolution on the inference of stream invertebrate responses to environmental conditions. <em>Freshwater Science</em>, <em>39</em>(3), 415-432.</p></li></ul><h1 id="model-development">Model Development</h1><h2 id="project-folder-structure">Project Folder Structure</h2><p>The folder structure is as follows: <strong>/model_dev</strong> is the root directory of the project and its sub-directories, and contains a local Git repository (ongoing development is pushed to <a href="https://github.com/bcaradima">online repository</a> but is largely experimental rather than consisting of reliable, regular commits; do not rely on it for extensive tracking of code changes):</p><ul><li><blockquote><p><strong>/doc</strong> contains documentation needed for frequent reference</p></blockquote></li><li><blockquote><p><strong>/scripts</strong> contains all scripts for supporting the entire model development process</p></blockquote></li></ul><ul><li><p><strong>old_scripts.zip:</strong> old, unmaintained scripts kept out of caution. ‘Tis a barren wasteland!</p></li><li><p><strong>/python</strong>: spatial data processing using ArcPy library in ArcGIS 10.1 SP1 with 64-bit geoprocessing installed. Input data is not included for these due to disk space limitations. Scripts were used to develop predictor variables (e.g., F.EDO, FRI)</p><ul><li><blockquote><p><strong>/inputs</strong> contains all input data read by model_dev scripts (usually new pre-processed inputs were copied from Human Impacts folder on server and periodically updated based on date in filename)</p></blockquote></li><li><blockquote><p><strong>/outputs</strong> stores model results and processed results (e.g., plots) that are copied manually to the respective paper folder (usually /graphics):</p></blockquote></li></ul></li></ul><ul><li><p><strong>/sampled observations</strong>: contains intermediate outputs used as observations in the model runs: randomly sampled (with set.seed) stream invertebrate observations (i.e., of entire dataset and k-fold datasets) for all paper submissions as CSV files</p></li><li><p><strong>/paper 1 revision 1 results</strong>: results for “paper 1 submission 1 rev 1” paper</p></li><li><p><strong>/paper 1 submission 2 results</strong>: results for “paper 1 submission 2” paper</p></li></ul><h2 id="script-organization">Script Organization</h2><p>Separate script files in /scripts are created for distinct steps in the model development process. First, input data is imported by setup.R and input data ready for modelling is prepared by inputs.R. User-defined custom functions are defined in functions.R and organized using comments. Exploratory and final results are generated in any script named results_#.R. To generate these results, the setup script must be run first (to read data, and source the inputs and functions scripts) before turning to a results_# script.</p><ul><li><p><strong>setup:</strong></p><ul><li><p>source function.R to define all functions</p></li><li><p>install/load required packages with custom ipak() function</p></li><li><p>read all necessary /input datasets, with minimal or no processing</p></li></ul></li><li><p><strong>functions:</strong></p><ul><li><p>contains all <strong>stable</strong>, commonly used functions with full comments defining their usage</p></li><li><p>key functions: <em>prepare.inputs, run.isdm, deploy.jsdm, cv.isdm, extract.jsdm, cv.jsdm, cv.jsdm.sample</em> (see script for description and code for each function)</p></li><li><p>note that custom functions are used extensively in generating results, but that some functions are found in the results scripts, often because they have to be modified slightly before being called</p></li></ul></li><li><p><strong>inputs:</strong></p><ul><li><p>pre-process and calculate all potential influence factors for subsequent preparation for model inputs</p></li><li><p>prepares and samples observation data (for BDM, CFCH, and CFp datasets) for both papers</p></li></ul></li><li><p><strong>variable_selection:</strong></p><ul><li><p>given potential explanatory variables and sampled observations, performs an exhaustive search of individual models with <em>p</em> parameters (say, 4-10 parameters) by doing 3-fold cross-validation of each individual model to taxa in the community</p></li><li><p>excludes models with collinear variables from validation process</p></li><li><p>stores only bare minimum statistics needed for model selection in output workspace</p></li></ul></li><li><p><strong>model_selection:</strong></p><ul><li><p>no longer used; most of its outputs are incorporated in the results_ scripts for specific papers</p></li><li><p>post-processing of output variable selection workspaces for final model selection</p></li><li><p>produces plots of mean predictive performance for community for each model</p></li></ul></li><li><p><strong>jsdm_inference:</strong></p><ul><li><p>prepares community and input data and calls Stan for inference according to the hierarchical multi-species and joint models described in Caradima et al. 2019</p></li><li><p>initial settings in script determine Stan code construction and final name of workspace file (this is important later on for processing results; see how the <em>identify.jsdm()</em> function works in the functions script)</p></li><li><p><em>identify.jsdm()</em> is later called within <em>extract.jsdm()</em>, <em>cv.jsdm(), cv.jsdm.sample().</em></p></li></ul></li><li><p><strong>results_p1:</strong></p><ul><li><p>generates results of paper 1, with Rstudio sections in the script (e.g., # Figure 1 ####) indicating where the code corresponds to the paper 1 submission 2 figures</p></li></ul></li><li><p><strong>results_p2:</strong></p><ul><li><p>generates results of paper 2 submission 1, with comments indicating where the code corresponds to the paper 2 submission 1 figures</p></li></ul></li></ul>
</body>
</html>
